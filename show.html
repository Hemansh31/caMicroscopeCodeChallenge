<!DOCTYPE html>
<html>
<head>
	<title>OpenSeaDragon</title>
	<link rel="stylesheet" type="text/css" href="checkbox.css">
</head>
<body>
	<h1 style="text-align: center;font-family: monospace;">Cross-Slide Coordinated Viewing Code Challenge GSoC 2020</h1><br>
	<center><label class="container">
	  <input type="checkbox" id="sync" onclick="alterSync()">
	  <span class="checkmark"></span><span style="margin-left: 35px;">Sync</span>
	</label></center>
	<div id="wrapper" style="display:grid;grid-template-columns: 1fr 1fr;width: 100%;">
		<div id="openseadragon1" style="width: 600px; height: 400px;justify-self: center;"></div>
		<div id="openseadragon2" style="width: 600px; height: 400px;justify-self: center;"></div>
	</div>
	<script src="openseadragon/openseadragon.min.js"></script>
	<script type="text/javascript">
	    var viewer = OpenSeadragon({
	        id: "openseadragon1",
	        prefixUrl: "openseadragon/images/",
	        tileSources: {
		        Image: {
		            xmlns:    "http://schemas.microsoft.com/deepzoom/2009",
		            Url:      "images/dzc_output_images/imageone_files/",
		            Format:   "jpg", 
		            Overlap:  "1", 
		            TileSize: "256",
		            Size: {
		                Height: "6400",
		                Width:  "10240"
		            }
		        }
		    }
	    });
	    var sviewer = OpenSeadragon({
	        id: "openseadragon2",
	        prefixUrl: "openseadragon/images/",
	        tileSources: {
		        Image: {
		            xmlns:    "http://schemas.microsoft.com/deepzoom/2009",
		            Url:      "images/dzc_output_images/imageone_files/",
		            Format:   "jpg", 
		            Overlap:  "1", 
		            TileSize: "256",
		            Size: {
		                Height: "6400",
		                Width:  "10240"
		            }
		        }
		    }
	    });
	    var enable=false;
	    var sviewerleading=false;
	    var viewerleading=false;
		viewer.addHandler('zoom', function(event) {
			if(!enable){
				return;
			}
			if(sviewerleading){
				return;
			}
			viewerleading=true;
		    sviewer.viewport.zoomTo(viewer.viewport.getZoom());
	        sviewer.viewport.panTo(viewer.viewport.getCenter());
	        viewerleading=false;
		});
		viewer.addHandler('pan', function(event) {
			if(!enable){
				return;
			}
			if(sviewerleading){
				return;
			}
			viewerleading=true;
		    sviewer.viewport.zoomTo(viewer.viewport.getZoom());
	        sviewer.viewport.panTo(viewer.viewport.getCenter());
	        viewerleading=false;
		});
		sviewer.addHandler('zoom', function(event) {
			if(!enable){
				return;
			}
			if(viewerleading){
				return;
			}
			sviewerleading=true;
		    viewer.viewport.zoomTo(sviewer.viewport.getZoom());
	        viewer.viewport.panTo(sviewer.viewport.getCenter());
	        sviewerleading=false;
		});
		sviewer.addHandler('pan', function(event) {
			if(!enable){
				return;
			}
			if(viewerleading){
				return;
			}
			sviewerleading=true;
		    viewer.viewport.zoomTo(sviewer.viewport.getZoom());
	        viewer.viewport.panTo(sviewer.viewport.getCenter());
	        sviewerleading=false;
		});
		function alterSync(){
			enable=document.getElementById("sync").checked;
			if(enable){
				sviewer.viewport.zoomTo(viewer.viewport.getZoom(true),true);
	        	sviewer.viewport.panTo(viewer.viewport.getCenter(true),true);
			}
		}
	</script>
</body>
</html>